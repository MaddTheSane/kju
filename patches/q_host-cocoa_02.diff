Index: Makefile.target
===================================================================
RCS file: /sources/qemu/qemu/Makefile.target,v
retrieving revision 1.238
diff -u -r1.238 Makefile.target
--- Makefile.target	6 Jan 2008 18:27:58 -0000	1.238
+++ Makefile.target	8 Jan 2008 15:42:39 -0000
@@ -516,7 +516,7 @@
 VL_OBJS+=gdbstub.o
 endif
 ifdef CONFIG_COCOA
-COCOA_LIBS=-F/System/Library/Frameworks -framework Cocoa -framework IOKit
+COCOA_LIBS=-F/System/Library/Frameworks -framework Cocoa -framework IOKit -framework CoreFoundation -framework OpenGL -framework ApplicationServices
 ifdef CONFIG_COREAUDIO
 COCOA_LIBS+=-framework CoreAudio
 endif
Index: Makefile
===================================================================
RCS file: /sources/qemu/qemu/Makefile,v
retrieving revision 1.140
diff -u -r1.140 Makefile
--- Makefile	6 Jan 2008 18:27:12 -0000	1.140
+++ Makefile	8 Jan 2008 15:42:40 -0000
@@ -93,7 +93,7 @@
 OBJS+=vnc.o d3des.o
 
 ifdef CONFIG_COCOA
-OBJS+=cocoa.o
+OBJS+=cocoaQemuMain.o cocoaQemuController.o cocoaQemu.o cocoaQemuProgressWindow.o cocoaQemuWindow.o cocoaQemuOpenGLView.o cocoaQemuQuartzView.o cocoaQemuQuickDrawView.o cocoaPopUpView.o cocoaCpuView.o FSController.o FSRoundedView.o FSToolbarController.o FSTransparentButton.o
 endif
 
 ifdef CONFIG_SLIRP
@@ -104,7 +104,10 @@
 OBJS+=$(addprefix slirp/, $(SLIRP_OBJS))
 endif
 
-cocoa.o: cocoa.m
+cocoa%.o: host-cocoa/cocoa%.m
+	$(CC) $(CFLAGS) $(CPPFLAGS) $(BASE_CFLAGS) -c -o $@ $<
+
+FS%.o: host-cocoa/FSControls/FS%.m
 	$(CC) $(CFLAGS) $(CPPFLAGS) $(BASE_CFLAGS) -c -o $@ $<
 
 sdl.o: sdl.c keymaps.c sdl_keysym.h
